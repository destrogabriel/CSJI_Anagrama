<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Anagrama CSJI</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; margin: 0; padding: 0; }
        .container { margin-top: 20px; padding: 10px; }
        
        /* Estilo da imagem do aluno */
        .photo { 
            width: 100%; 
            max-width: 400px; /* Limita o tamanho máximo para evitar que a imagem fique muito grande */
            height: auto; 
            border-radius: 50%; 
            object-fit: cover;
            margin-bottom: 20px;
        }
        
        /* Estilo das letras embaralhadas */
        .letters { 
            display: flex; 
            flex-wrap: wrap; /* Para que as letras se ajustem bem em telas pequenas */
            justify-content: center; 
            gap: 10px; 
            margin-top: 20px; 
        }
        
        .letter { 
            font-size: 18px; 
            padding: 10px; 
            border: 2px solid black; 
            cursor: pointer; 
            min-width: 40px; 
            text-align: center;
            margin: 5px;
        }

        /* Estilos para as letras corretas e incorretas */
        .correct { 
            background-color: lightgreen; 
            pointer-events: none; 
        }

        .incorrect { 
            background-color: lightcoral; 
            pointer-events: none; 
        }

        /* Estilo para a resposta */
        .answer { 
            font-size: 24px; 
            margin-top: 20px; 
        }

        /* Estilo para mensagens de erro */
        .error { 
            color: red; 
            font-size: 18px; 
            margin-top: 10px; 
        }

        /* Estilo para mensagens de parabéns */
        .congratulations { 
            font-size: 24px; 
            color: green; 
            font-weight: bold; 
            margin-top: 20px; 
        }

        /* Botão de reiniciar */
        .restart-btn { 
            margin-top: 30px; 
            padding: 10px 20px; 
            font-size: 18px; 
            cursor: pointer; 
        }

        /* Media query para telas menores que 600px (celulares) */
        @media (max-width: 600px) {
            .letter {
                font-size: 16px;
                padding: 8px;
                min-width: 35px;
            }

            .answer {
                font-size: 20px;
            }

            .congratulations {
                font-size: 20px;
            }

            .photo {
                max-width: 300px;
            }

            .restart-btn {
                font-size: 16px;
                padding: 8px 15px;
            }
        }
    </style>
</head>
<body>
    <h1>ESCOLHA AS LETRAS DO SEU NOME</h1>
    <div class="container">
        <img id="studentPhoto" src="" alt="Foto do Aluno" class="photo">
        <div class="letters" id="lettersContainer"></div>
        <div class="answer" id="answer"></div>
        <p class="error" id="errorMessage"></p>
        <p class="congratulations" id="congratulationsMessage"></p>
        <button id="restartBtn" class="restart-btn" style="display: none;" onclick="restartGame()">Reiniciar</button>
    </div>

    <script>
        const students = [
            { name: "ALLANA", photo: "allana.png" },
            { name: "AYLA", photo: "ayla.png" },
            { name: "CECILIA", photo: "cecilia.png" },
            { name: "DAVI DE CASTRO", photo: "davi_de_castro.png" },
            { name: "DAVI LUCCA", photo: "davi_lucca.png" },
            { name: "ESTER", photo: "ester.png" },
            { name: "GAEL", photo: "gael.png" },
            { name: "HEITOR", photo: "heitor.png" },
            { name: "ISIS", photo: "isis.png" },
            { name: "JOÃO MIGUEL", photo: "joao_miguel.png" },
            { name: "JOÃO PEDRO", photo: "joao_pedro.png" },
            { name: "JOHN", photo: "john.png" },
            { name: "LORENZO", photo: "lorenzo.png" },
            { name: "LUCAS", photo: "lucas.png" },
            { name: "MANUELLA", photo: "manuella.png" },
            { name: "MIGUEL", photo: "miguel.png" },
            { name: "VALLENTINA", photo: "vallentina.png" }
        ];

        let studentsLeft = [...students]; // Lista de alunos restantes
        let answerArray = [];
        let currentStudent = {};
        let gameLocked = false;

        function startGame() {
            if (studentsLeft.length === 0) {
                // Se não houver alunos restantes, mostrar botão de reiniciar
                document.getElementById("restartBtn").style.display = "block";
                return;
            }

            answerArray = [];
            document.getElementById("answer").innerText = "";
            document.getElementById("errorMessage").innerText = "";
            document.getElementById("congratulationsMessage").innerText = "";
            gameLocked = false;

            currentStudent = getRandomStudent();
            let shuffledName = shuffle(currentStudent.name.replace(/\s+/g, '')); // Remove espaços durante o embaralhamento

            document.getElementById("studentPhoto").src = currentStudent.photo;
            renderLetters(shuffledName, currentStudent.name);
        }

        function getRandomStudent() {
            let randomIndex = Math.floor(Math.random() * studentsLeft.length);
            return studentsLeft[randomIndex];
        }

        function shuffle(word) {
            return word.split('').sort(() => Math.random() - 0.5);
        }

        function renderLetters(shuffledName, correctName) {
            const container = document.getElementById("lettersContainer");
            container.innerHTML = "";
            shuffledName.forEach(letter => {
                let span = document.createElement("span");
                span.innerText = letter;
                span.classList.add("letter");
                span.onclick = () => selectLetter(letter, span, correctName);
                container.appendChild(span);
            });
        }

        function selectLetter(letter, element, correctName) {
            if (gameLocked) return;

            answerArray.push(letter);
            element.classList.add("correct");
            document.getElementById("answer").innerText = answerArray.join("");

            let answerWithSpaces = answerArray.join("").split('').map((char, index) => {
                return (correctName[index] === ' ') ? ' ' : char; // Reinsere o espaço na posição correta
            }).join('');

            if (answerWithSpaces === correctName) {
                document.getElementById("congratulationsMessage").innerText = "Parabéns! Você acertou!";
                studentsLeft = studentsLeft.filter(student => student.name !== correctName); // Remove o aluno da lista
                setTimeout(startGame, 3000); // Avança para o próximo aluno após 3 segundos
            } else if (!correctName.startsWith(answerWithSpaces)) {
                element.classList.add("incorrect");
                document.getElementById("errorMessage").innerText = "Erro! Tente novamente.";
                gameLocked = true;
                setTimeout(resetGame, 1000);
            }
        }

        function resetGame() {
            startGame();
        }

        function restartGame() {
            studentsLeft = [...students]; // Restaura a lista de alunos
            document.getElementById("restartBtn").style.display = "none"; // Oculta o botão de reiniciar
            startGame();
        }

        startGame();
    </script>
</body>
</html>
